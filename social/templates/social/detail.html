{% extends 'parent/base.html' %}
{% block title %}post detail{% endblock %}
{% block content %}
    {{ post.author }}:
    <br>
    {{ post.description }}
    <br>
    {% for tag in post.tags.all %}
            <a href="{% url 'social:post_list_by_tag' tag_slug=tag.slug%}">
                #{{ tag.name }}
            </a>
        {% if not forloop.last %}&nbsp; {% endif %}
    {% endfor %}
    <br>
    {{ post.created }}
    <br>
    {% if post.author == request.user %}
            <a href="{% url 'social:edit_post' post.id %}">
                edit post
            </a>
    {% endif %}
    &nbsp;
    {% if post.author == request.user %}
            <a href="{% url 'social:delete_post' post.id %}">
                delete post
            </a>
    {% endif %}
    <hr>
    <h2>
        Comments
    </h2>
    <div>
        {% for cm in comments %}
            {{cm.name}}
            {{cm.body|linebreaks}}
            <br>
        {% empty %}
        There is no comment!
        {% endfor %}
    </div>
    <form action="{% url 'social:post_comment' post.id %}" method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <input type="submit" value="add comment">
    </form>
    <hr>
    <h2>
        Similar Posts
    </h2>
    {% for post in similar_post %}
        <p>
            <a href="{{ post.get_absolute_url }}">
                {{ post.description|truncatewords:10}}
            </a>
        </p>
    {% empty %}
        There are no similar posts.
    {% endfor %}
{% endblock %}